# FileLair Web アプリケーション ユーザー向け仕様書

## 1. はじめに

FileLair は、誰でも簡単に使えるセキュアな匿名ファイル共有サービスです。アカウント登録やログインは不要で、ファイルをアップロードして生成されたリンクを共有するだけで、安全にファイルを受け渡すことができます。

### 主な特徴

- **完全匿名**: ユーザー登録・ログイン不要
- **セキュア**: 転送時・保管時のデータ暗号化
- **パスワード保護**: 任意でファイルにパスワードを設定可能
- **自動削除**: アップロードから 48 時間後に自動削除
- **大容量対応**: 最大 100MB までのファイルをサポート
- **マルウェア保護**: アップロードされたファイルを自動スキャン

## 2. 対応環境

### 対応ブラウザ

- Google Chrome（最新版）
- Safari（最新版）
- モバイルブラウザ（iOS Safari、Android Chrome）

### 推奨環境

- インターネット接続速度: 1Mbps 以上
- JavaScript: 有効にする必要があります
- Cookie: 有効にする必要があります（CSRF 保護のため）

## 3. ファイルアップロード手順

### 3.1 ファイルの選択

1. FileLair のトップページにアクセスします
2. 「ファイルを選択」エリアが表示されます
3. 以下のいずれかの方法でファイルを選択します：
   - **クリックして選択**: エリアをクリックしてファイル選択ダイアログから選択
   - **ドラッグ&ドロップ**: ファイルをエリアにドラッグして離す

### 3.2 対応ファイル形式

以下のファイル形式がアップロード可能です：

**ドキュメント**

- テキストファイル（.txt）
- PDF（.pdf）
- Microsoft Word（.doc, .docx）
- Microsoft Excel（.xls, .xlsx）
- Microsoft PowerPoint（.ppt, .pptx）

**画像**

- JPEG（.jpg, .jpeg）
- PNG（.png）
- GIF（.gif）
- BMP（.bmp）
- SVG（.svg）
- WebP（.webp）

**音声・動画**

- MP3（.mp3）
- WAV（.wav）
- OGG（.ogg）
- MP4（.mp4）
- AVI（.avi）
- MOV（.mov）

**アーカイブ**

- ZIP（.zip）
- RAR（.rar）
- 7Z（.7z）
- TAR（.tar）
- GZIP（.gz）

**制限事項**

- 最大ファイルサイズ: 100MB
- 実行ファイル（.exe, .bat, .cmd 等）はアップロード不可

### 3.3 パスワード設定（任意）

ファイルにパスワード保護を設定する場合：

1. 「Optional Password Protection」欄にパスワードを入力
2. パスワード強度が表示されます（弱・中・強）
3. 「Confirm Password」欄に同じパスワードを再入力

**パスワード要件**

- 長さ: 8 文字以上、128 文字以下
- 以下の 4 種類から 3 種類以上を含む:
  - 大文字（A-Z）
  - 小文字（a-z）
  - 数字（0-9）
  - 特殊文字（!@#$%^&\*()\_+-=[]{}|;:,.<>?）
- 同じ文字の 4 連続は禁止（例: aaaa）
- 一般的なパスワード（password, admin 等）は使用不可

### 3.4 アップロード実行

1. 「Upload File」ボタンをクリック
2. アップロード進捗がプログレスバーで表示されます
3. アップロード完了後、共有リンクが表示されます

### 3.5 共有リンクの取得

アップロード完了後：

1. 共有リンクが自動的に表示されます
2. 「Copy Link」ボタンをクリックしてクリップボードにコピー
3. 有効期限（48 時間）が表示されます
4. このリンクを相手に共有してファイルを受け渡します

## 4. ファイルダウンロード手順

### 4.1 共有リンクへのアクセス

1. 受け取った共有リンクをブラウザで開きます
2. ファイル情報画面が表示されます

### 4.2 ファイル情報の確認

以下の情報が表示されます：

- ファイル名
- ファイルサイズ
- アップロード日時
- 有効期限
- パスワード保護の有無

### 4.3 パスワード入力（必要な場合）

パスワード保護されたファイルの場合：

1. 「Password Required」欄が表示されます
2. 共有者から受け取ったパスワードを入力
3. パスワードを間違えた場合、残り試行回数が表示されます（最大 5 回）

### 4.4 ダウンロード実行

1. 「Download File」ボタンをクリック
2. ブラウザの標準ダウンロード機能でファイルが保存されます

**ダウンロード時の注意事項**

- パスワードを 5 回間違えると 15 分間ダウンロードできなくなります
- マルウェアスキャン中の場合は「Scan in Progress」と表示され、完了まで待つ必要があります
- 感染ファイルが検出された場合は「File Unavailable」と表示されダウンロードできません

## 5. セキュリティとプライバシー

### 5.1 データの暗号化

- **転送時**: すべての通信は HTTPS（TLS 1.2 以上）で暗号化
- **保管時**: サーバー上で AES-256 暗号化で保護

### 5.2 プライバシー保護

- ユーザー登録不要で完全匿名での利用が可能
- IP アドレスはレート制限のためのみ使用され、ログには記録されません
- ファイルは 48 時間後に自動的に完全削除されます

### 5.3 マルウェア保護

- アップロードされたファイルは自動的にマルウェアスキャンされます
- スキャン中はダウンロードが一時的に保留されます
- 感染ファイルは自動的に削除され、アクセス不可になります

## 6. トラブルシューティング

### 6.1 アップロードができない場合

**症状**: 「Upload failed」エラーが表示される

**対処法**:

- ファイルサイズが 100MB 以下であることを確認
- ファイル形式が対応形式であることを確認
- インターネット接続を確認
- ブラウザの JavaScript が有効になっていることを確認

### 6.2 ダウンロードができない場合

**症状**: 「File Not Found」エラーが表示される

**対処法**:

- リンクの有効期限（48 時間）が切れていないか確認
- URL が正しくコピーされているか確認
- パスワード保護されている場合、正しいパスワードを入力

### 6.3 パスワードエラー

**症状**: 「Invalid Password」エラーが表示される

**対処法**:

- パスワードの大文字・小文字を正確に入力
- 余分なスペースが含まれていないか確認
- 5 回失敗した場合は 15 分待ってから再試行

### 6.4 その他のエラー

**エラーメッセージ一覧**:

- `FILE_TOO_LARGE`: ファイルサイズが 100MB を超えています
- `INVALID_FILE_TYPE`: 対応していないファイル形式です
- `RATE_LIMITED`: アクセス制限中です。時間をおいて再試行してください
- `SCAN_PENDING`: マルウェアスキャン中です。しばらく待ってから再試行してください
- `ACCESS_DENIED`: ファイルへのアクセスが拒否されました（マルウェア検出等）

## 7. よくある質問（FAQ）

### Q1: ファイルはどのくらいの期間保存されますか？

A: アップロードから 48 時間後に自動的に削除されます。この期間は変更できません。

### Q2: 複数のファイルを一度にアップロードできますか？

A: 現在は 1 ファイルずつのアップロードのみ対応しています。複数ファイルの場合は、ZIP ファイルにまとめてアップロードすることをお勧めします。

### Q3: ダウンロード回数に制限はありますか？

A: ダウンロード回数自体に制限はありませんが、短時間に大量のリクエストを行うとレート制限がかかる場合があります。

### Q4: アップロードしたファイルを削除できますか？

A: 手動での削除機能は提供していません。48 時間後の自動削除をお待ちください。

### Q5: ファイルのプレビュー機能はありますか？

A: セキュリティ上の理由から、ファイルのプレビュー機能は提供していません。

### Q6: スマートフォンから利用できますか？

A: はい、モバイルブラウザから同じように利用できます。大きなファイルの場合は、Wi-Fi 環境での利用を推奨します。

### Q7: パスワードを忘れてしまいました

A: セキュリティ上、パスワードのリセット機能はありません。アップロード者に再度確認してください。

## 8. 利用上の注意事項

- 法令に違反するファイルのアップロードは禁止されています
- 他者の著作権を侵害するファイルの共有は行わないでください
- マルウェアや有害なファイルのアップロードは自動的に検出・削除されます
- サービスの不正利用が確認された場合、アクセスを制限することがあります
